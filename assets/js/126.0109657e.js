(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{1223:function(t,s,a){"use strict";a.r(s);var n=a(7),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"单例-singleton"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#单例-singleton"}},[t._v("#")]),t._v(" 单例（Singleton）")]),t._v(" "),n("h3",{attrs:{id:"intent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#intent"}},[t._v("#")]),t._v(" Intent")]),t._v(" "),n("p",[t._v("确保一个类只有一个实例，并提供该实例的全局访问点。")]),t._v(" "),n("h3",{attrs:{id:"class-diagram"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#class-diagram"}},[t._v("#")]),t._v(" Class Diagram")]),t._v(" "),n("p",[t._v("使用一个私有构造函数、一个私有静态变量以及一个公有静态函数来实现。")]),t._v(" "),n("p",[t._v("私有构造函数保证了不能通过构造函数来创建对象实例，只能通过公有静态函数返回唯一的私有静态变量。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(454),alt:"avatar"}}),n("br")]),t._v(" "),n("h3",{attrs:{id:"implementation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[t._v("#")]),t._v(" Implementation")]),t._v(" "),n("h4",{attrs:{id:"i-懒汉式-线程不安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#i-懒汉式-线程不安全"}},[t._v("#")]),t._v(" Ⅰ 懒汉式-线程不安全")]),t._v(" "),n("p",[t._v("以下实现中，类变量 _instance 被延迟实例化，这样做的好处是，如果没有用到该类，那么就不会实例化 _instance，从而节约资源。")]),t._v(" "),n("p",[t._v("这个实现在多线程环境下是不安全的，如果多个线程能够同时进入 "),n("code",[t._v('if not hasattr(Singleton, "_instance")')]),t._v("内，将导致实例化多次 _instance。")]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@classmethod")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_instance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hasattr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_instance"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_instance\n\n")])])]),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("__new__")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("kw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hasattr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_instance'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__new__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("kw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_instance\n\n")])])]),n("h4",{attrs:{id:"ii-饿汉式-线程安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ii-饿汉式-线程安全"}},[t._v("#")]),t._v(" Ⅱ 饿汉式-线程安全")]),t._v(" "),n("p",[t._v("线程不安全问题主要是由于 _instance 被实例化多次，采取直接实例化 _instance 的方式就不会产生线程不安全问题。")]),t._v(" "),n("p",[t._v("但是直接实例化的方式也丢失了延迟实例化带来的节约资源的好处。")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"iii-懒汉式-线程安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#iii-懒汉式-线程安全"}},[t._v("#")]),t._v(" Ⅲ 懒汉式-线程安全")]),t._v(" "),n("p",[t._v("只需要对 getUniqueInstance() 方法加锁，那么在一个时间点只能有一个线程能够进入该方法，从而避免了实例化多次 uniqueInstance。")]),t._v(" "),n("p",[t._v("但是当一个线程进入该方法之后，其它试图进入该方法的线程都必须等待，即使 uniqueInstance 已经被实例化了。这会让线程阻塞时间过长，因此该方法有性能问题，不推荐使用。")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUniqueInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" uniqueInstance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"iv-双重校验锁-线程安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#iv-双重校验锁-线程安全"}},[t._v("#")]),t._v(" Ⅳ 双重校验锁-线程安全")]),t._v(" "),n("p",[t._v("uniqueInstance 只需要被实例化一次，之后就可以直接使用了。加锁操作只需要对实例化那部分的代码进行，只有当 uniqueInstance 没有被实例化时，才需要进行加锁。")]),t._v(" "),n("p",[t._v("双重校验锁先判断 uniqueInstance 是否已经被实例化，如果没有被实例化，那么才对实例化语句进行加锁。")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" uniqueInstance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUniqueInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" uniqueInstance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("考虑下面的实现，也就是只使用了一个 if 语句。在 uniqueInstance "),n("mark",[t._v(" null 的情况下，如果两个线程都执行了 if 语句，那么两个线程都会进入 if 语句块内。虽然在 if 语句块内有加锁操作，但是两个线程都会执行 "),n("code",[t._v("uniqueInstance = new Singleton();")]),t._v(" 这条语句，只是先后的问题，那么就会进行两次实例化。因此必须使用双重校验锁，也就是需要使用两个 if 语句：第一个 if 语句用来避免 uniqueInstance 已经被实例化之后的加锁操作，而第二个 if 语句进行了加锁，所以只能有一个线程进入，就不会出现 uniqueInstance ")]),t._v(" null 时两个线程同时进行实例化操作。")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        uniqueInstance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("uniqueInstance 采用 volatile 关键字修饰也是很有必要的， "),n("code",[t._v("uniqueInstance = new Singleton();")]),t._v(" 这段代码其实是分为三步执行：")]),t._v(" "),n("ol",[n("li",[t._v("为 uniqueInstance 分配内存空间")]),t._v(" "),n("li",[t._v("初始化 uniqueInstance")]),t._v(" "),n("li",[t._v("将 uniqueInstance 指向分配的内存地址")])]),t._v(" "),n("p",[t._v("但是由于 JVM 具有指令重排的特性，执行顺序有可能变成 1>3>2。指令重排在单线程环境下不会出现问题，但是在多线程环境下会导致一个线程获得还没有初始化的实例。例如，线程 T"),n("sub",[t._v("1")]),t._v(" 执行了 1 和 3，此时 T"),n("sub",[t._v("2")]),t._v(" 调用 getUniqueInstance() 后发现 uniqueInstance 不为空，因此返回 uniqueInstance，但此时 uniqueInstance 还未被初始化。")]),t._v(" "),n("p",[t._v("使用 volatile 可以禁止 JVM 的指令重排，保证在多线程环境下也能正常运行。")]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("_instance_lock "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" threading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Lock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@classmethod")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_instance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hasattr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_instance"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_instance_lock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("hasattr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_instance"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t\t\tcls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_instance\n")])])]),n("h4",{attrs:{id:"v-静态内部类实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#v-静态内部类实现"}},[t._v("#")]),t._v(" Ⅴ 静态内部类实现")]),t._v(" "),n("p",[t._v("当 Singleton 类被加载时，静态内部类 SingletonHolder 没有被加载进内存。只有当调用 "),n("code",[t._v("getUniqueInstance()")]),t._v(" 方法从而触发 "),n("code",[t._v("SingletonHolder.INSTANCE")]),t._v(" 时 SingletonHolder 才会被加载，此时初始化 INSTANCE 实例，并且 JVM 能确保 INSTANCE 只被实例化一次。")]),t._v(" "),n("p",[t._v("这种方式不仅具有延迟初始化的好处，而且由 JVM 提供了对线程安全的支持。")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SingletonHolder")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" INSTANCE "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUniqueInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SingletonHolder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("INSTANCE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"vi-枚举实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vi-枚举实现"}},[t._v("#")]),t._v(" Ⅵ 枚举实现")]),t._v(" "),n("div",{staticClass:"language-java extra-class"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    INSTANCE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" objName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" objName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" objName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("objName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" objName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 单例测试")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" firstSingleton "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("INSTANCE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        firstSingleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"firstName"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("firstSingleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" secondSingleton "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("INSTANCE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        secondSingleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"secondName"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("firstSingleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("secondSingleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 反射获取实例测试")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" enumConstants "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEnumConstants")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" enumConstant "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" enumConstants"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("enumConstant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObjName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("firstName\nsecondName\nsecondName\nsecondName\n")])])]),n("p",[t._v("该实现可以防止反射攻击。在其它实现中，通过 setAccessible() 方法可以将私有构造函数的访问级别设置为 public，然后调用构造函数从而实例化对象，如果要防止这种攻击，需要在构造函数中添加防止多次实例化的代码。该实现是由 JVM 保证只会实例化一次，因此不会出现上述的反射攻击。")]),t._v(" "),n("p",[t._v("该实现在多次序列化和序列化之后，不会得到多个实例。而其它实现需要使用 transient 修饰所有字段，并且实现序列化和反序列化的方法。")]),t._v(" "),n("h4",{attrs:{id:"模块导入-线程安全"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模块导入-线程安全"}},[t._v("#")]),t._v(" 模块导入-线程安全")]),t._v(" "),n("div",{staticClass:"language-python extra-class"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\nsingleton "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Singleton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h3",{attrs:{id:"examples"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),n("ul",[n("li",[t._v("Logger Classes")]),t._v(" "),n("li",[t._v("Configuration Classes")]),t._v(" "),n("li",[t._v("Accesing resources in shared mode")]),t._v(" "),n("li",[t._v("Factories implemented as Singletons")])]),t._v(" "),n("h3",{attrs:{id:"jdk"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jdk"}},[t._v("#")]),t._v(" JDK")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#getRuntime%28%29",target:"_blank",rel:"noopener noreferrer"}},[t._v("java.lang.Runtime#getRuntime()"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"http://docs.oracle.com/javase/8/docs/api/java/awt/Desktop.html#getDesktop--",target:"_blank",rel:"noopener noreferrer"}},[t._v("java.awt.Desktop#getDesktop()"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("[java.lang.System#getSecurityManager()](")])])])}),[],!1,null,null,null);s.default=e.exports},454:function(t,s){t.exports="data:image/png;base64,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"}}]);